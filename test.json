{"job":{"constraint":{"attribute":"$${node.class}","value":"monitoring"},"datacenters":["local"],"group":{"count":1,"ephemeral_disk":{"size":500},"name":"grafana","resources":{"cpu":1024,"memory":2048,"network":{"port":"http"}},"service":{"check":{"interval":"10s","path":"/","port":"http","timeout":"9s","type":"http"},"name":"grafana","port":"http"},"task":{"config":{"extra_hosts":["consul:$${attr.unique.network.ip-address}"],"image":"density/monitoring/grafana:0","logging":{"config":{"fluent-address":"$${attr.unique.network.ip-address}:24224","fluentd-async-connect":true,"tag":"grafana"},"type":"fluentd"},"network_mode":"host","port_map":{"http":3000}},"driver":"docker","name":"grafana","user":"grafana"},"template":{"data":"\u003c\u003cEOH\n{{ range ls \"monitoring/grafana\" }}\n  {{ .Key | toUpper }}={{ .Value }}\n{{ end }}\nEOH\n","destination":"secrets/.env","env":true,"splay":"60s"}},"name":"grafana","type":"service"}}